![Dashboard Windows Exporter Grafana](/images/2025/2025-09-13T13:29:57.374+07:00.jpg)
*Minh họa dashboard giám sát Windows trên Grafana với Prometheus và Exporter.*

Bạn có thể giám sát máy chủ **Windows** với Grafana bằng cách sử dụng **Prometheus** cùng với **Windows Exporter (WMI Exporter)** hoặc **Telegraf** để thu thập metrics, từ đó hiển thị trên Grafana. Dưới đây là hướng dẫn đầy đủ các bước thực hiện, minh họa với Windows Exporter (tương tự cho Telegraf, xem cuối hướng dẫn).

---

## Sơ đồ tổng quan


```
Windows Server --> Windows Exporter/Telegraf --> Prometheus --> Grafana Dashboard
```

*(Ảnh minh họa cấu trúc giám sát bên dưới)*


```
[Windows Server]---(metrics)-->[Windows Exporter/Telegraf:9182]---(scrape)-->[Prometheus]---(query)-->[Grafana]
```


---

## 1. Cài đặt **Windows Exporter** trên máy chủ Windows

Để bắt đầu, bạn cần cài đặt Windows Exporter trên máy chủ Windows mà bạn muốn giám sát. Windows Exporter là một công cụ giúp thu thập các chỉ số hiệu suất của hệ thống Windows và chuyển đổi chúng sang định dạng mà Prometheus có thể hiểu và thu thập.

- Tải bản mới nhất tại: [prometheus-community/windows_exporter/releases](https://github.com/prometheus-community/windows_exporter/releases) [Nguồn: prometheus-community].
- Chạy file `.msi` hoặc `.exe` để cài đặt.
- Sau khi cài xong, kiểm tra dịch vụ đã chạy:

    - Truy cập: `http://<IP_Windows_Server>:9182/metrics`
    - Kết quả hiển thị là các dòng metric, chứng tỏ Exporter chạy thành công [Nguồn: wiki.nhanhoa.com].

- **Mở port 9182** trên Windows cho phép truy cập metrics từ server Prometheus (tham khảo hướng dẫn mở port nếu cần) [Nguồn: itstar.edu.vn].

---

## 2. Cấu hình **Prometheus** để thu thập dữ liệu từ Windows Exporter

Sau khi Windows Exporter đã chạy trên máy chủ Windows, bước tiếp theo là cấu hình Prometheus để thu thập dữ liệu từ nó.

- Truy cập file cấu hình của Prometheus: `prometheus.yml`.
- Thêm đoạn sau vào mục `scrape_configs`:


```yaml
- job_name: 'windows_exporter'
  static_configs:
    - targets: ['<IP_Windows_Server>:9182']
```

- Khởi động lại dịch vụ Prometheus sau khi chỉnh cấu hình [Nguồn: wiki.nhanhoa.com].

- Kiểm tra trạng thái:
    - Truy cập Prometheus: `http://<IP_Prometheus>:9090`
    - Vào *Status > Targets* để xác nhận “windows_exporter” trạng thái **UP** [Nguồn: itstar.edu.vn].

---

## 3. Cài đặt và cấu hình **Grafana**

Grafana là công cụ trực quan hóa dữ liệu mạnh mẽ. Nó sẽ kết nối với Prometheus để lấy dữ liệu và hiển thị trên các dashboard dễ hiểu.

- Cài Grafana theo hướng dẫn cho hệ điều hành của bạn hoặc sử dụng Docker (tham khảo tài liệu) [Nguồn: devopsedu.vn].
- Đăng nhập vào Grafana (`http://<IP_Grafana>:3000`), cấu hình “Data Source” là Prometheus với địa chỉ phù hợp (ví dụ: `http://prometheus:9090`) [Nguồn: elroydevops.tech].

---

## 4. Tạo **Dashboard giám sát Windows** trên Grafana

Để trực quan hóa dữ liệu, bạn có thể tạo dashboard riêng hoặc nhập dashboard mẫu có sẵn.

- Có thể sử dụng Dashboard mẫu sẵn:
    - Truy cập vào “Create > Import” trong Grafana.
    - Nhập Dashboard ID nổi bật như: **14510** (“Windows Exporter Dashboard” của Grafana Labs) [Nguồn: wiki.nhanhoa.com].
    - Chọn Data Source là Prometheus.
    - Sau khi import, dashboard sẽ hiển thị các chỉ số như CPU, RAM, Disk... của server Windows.

- Nếu sử dụng file JSON dashboard mẫu mà không hiển thị số liệu, đổi hết từ “wmi” thành “windows” trong file JSON và import lại [Nguồn: itstar.edu.vn].

---

## 5. (Tùy chọn) Sử dụng **Telegraf** thay cho Windows Exporter

Telegraf là một giải pháp thay thế cho Windows Exporter, đặc biệt hữu ích nếu bạn đang sử dụng hệ sinh thái InfluxDB hoặc muốn có nhiều tùy chọn cấu hình hơn cho việc thu thập metrics.

- **Telegraf** là agent của InfluxData, hỗ trợ xuất metric sang Prometheus.
- Cài Telegraf và cấu hình plugin `inputs.win_perf_counters` để lấy metric, output `prometheus_client` để xuất sang port (ví dụ `:9273`).
- Sau đó, cấu hình Prometheus giống như trên để scrape từ Telegraf. [Nguồn: giangtester.com].

---

## Hình ảnh minh họa

- Giao diện kiểm tra metrics trên Windows Exporter:
    `http://<IP>:9182/metrics` sẽ xuất hiện như:


```
# HELP windows_cpu_time_total ...
windows_cpu_time_total{cpu=\"0\",mode=\"idle\"} 8.625e+07
...
```

*(Ảnh chụp thực tế sẽ giống khung dòng dữ liệu trên [Nguồn: wiki.nhanhoa.com][Nguồn: itstar.edu.vn].)*

---

## Lưu ý bổ sung
- Luôn đảm bảo các services (Windows Exporter, Prometheus, Grafana) được bật cùng hệ thống để tránh mất dữ liệu giám sát khi reboot [Nguồn: wiki.nhanhoa.com].
- Có thể mở rộng giám sát nhiều server Windows bằng cách thêm nhiều mục vào phần `static_configs` trong cấu hình Prometheus hoặc dùng service discovery nâng cao.
- Nếu có nhu cầu giám sát chuyên sâu hơn (process, service, event log...), cấu hình thêm các collectors khi cài đặt Exporter hoặc Telegraf.

---

## Kết luận

Việc giám sát máy chủ Windows với Grafana và Prometheus mang lại một cái nhìn toàn diện về hiệu suất và tình trạng của hệ thống. Bằng cách cài đặt Windows Exporter để thu thập dữ liệu, cấu hình Prometheus để lưu trữ và truy vấn metrics, và sử dụng Grafana để trực quan hóa, quản trị viên có thể chủ động trong việc quản lý, bảo trì và tối ưu hóa tài nguyên. Hệ thống này không chỉ giúp phát hiện sớm các vấn đề mà còn cung cấp dữ liệu lịch sử quan trọng cho việc phân tích xu hướng và đưa ra quyết định chiến lược.

## Table of Contents
- [Mở đầu](#mở-đầu)
- [Nội dung chính](#nội-dung-chính)
- [Kết luận](#kết-luận)